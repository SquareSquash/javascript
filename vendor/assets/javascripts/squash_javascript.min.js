(function(){var l,f={}.hasOwnProperty,i=[].slice,e="undefined"!==typeof exports&&null!==exports?exports:this,j=function(){},u;u=void 0;j.instance=function(){return null!=u?u:u=new l};e.SquashJavascript=j;var e=function(){TraceKit.report.subscribe(function(b,d){return SquashJavascript.instance().report(b,d)})},n,r,w,h;e.prototype.configure=function(b){var d,c,a;this.options||(this.options={disabled:!1,notifyPath:"/api/1.0/notify",transmitTimeout:15E3,ignoredExceptionClasses:[],ignoredExceptionMessages:{}});
a=[];for(d in b)f.call(b,d)&&(c=b[d],a.push(this.options[d]=c));return a};e.prototype.notify=function(b,d){if(b instanceof Error)return b._squash_user_data=d,TraceKit.report(b);throw b;};e.prototype.report=function(b,d){var c,a,g,y,A,G,p,k,e,j,i,h;try{if(null!=(G=this.options)&&G.disabled)return!1;if(!(null!=(p=this.options)&&p.APIKey)||!(null!=(k=this.options)&&k.environment)||!(null!=(e=this.options)&&e.revision)||!(null!=(j=this.options)&&j.APIHost))return console.error("Missing required Squash configuration keys"),
!1;if(this.shouldIgnoreError(b)||!b.stack)return!1;a={};a.api_key=this.options.APIKey;a.environment=this.options.environment;a.client="javascript";a.revision=this.options.revision;a.class_name=null!=(i=b.type)?i:b.name;!b.name&&(y=b.message.match(/^(Uncaught )?(\w+): (.+)/))?(a.class_name=y[2],a.message=y[3]):a.message=b.message;null==a.class_name&&(a.class_name="Error");a.backtraces=w(b.stack);a.capture_method=b.mode;a.occurred_at=n(new Date);a.schema=window.location.protocol.replace(/:$/,"");a.host=
window.location.hostname;0<window.location.port.length&&(a.port=window.location.port);a.path=window.location.pathname;a.query=window.location.search;""!==window.location.hash&&(a.fragment=window.location.hash);a.user_agent=navigator.userAgent;a.screen_width=screen.width;a.screen_height=screen.height;a.window_width=window.innerWidth;a.window_height=window.innerHeight;a.color_depth=screen.colorDepth;h=d._squash_user_data;for(g in h)f.call(h,g)&&(A=h[g],a[g]=A);c=JSON.stringify(a);this.HTTPTransmit(this.options.APIHost+
this.options.notifyPath,[["Content-Type","application/json"]],c);return!0}catch(r){return console.error("Error while trying to notify Squash:",r.stack),console.error("-- original error:",b)}};e.prototype.addUserData=function(b,d){try{return d()}catch(c){throw null==c._squash_user_data&&(c._squash_user_data={}),h(c._squash_user_data,b),c;}};e.prototype.addingUserData=function(b,d){return function(){var c;c=1<=arguments.length?i.call(arguments,0):[];return SquashJavascript.instance().addUserData(b,
function(){return d.apply(null,c)})}};e.prototype.ignoreExceptions=function(){var b,d;d=2<=arguments.length?i.call(arguments,0,b=arguments.length-1):(b=0,[]);b=arguments[b++];try{return b()}catch(c){throw c._squash_ignored_exceptions=(c._squash_ignored_exceptions||[]).concat(d),c;}};e.prototype.ignoringExceptions=function(){var b,d,c;d=2<=arguments.length?i.call(arguments,0,c=arguments.length-1):(c=0,[]);b=arguments[c++];return function(){var a,g;a=1<=arguments.length?i.call(arguments,0):[];return(g=
SquashJavascript.instance()).ignoreExceptions.apply(g,i.call(d).concat([function(){return b.apply(null,a)}]))}};e.prototype.HTTPTransmit=function(b,d,c){var a,g,y;a=new XMLHttpRequest;a.open("POST",b,!0);a.timeout=this.options.transmitTimeout;g=0;for(y=d.length;g<y;g++)b=d[g],a.setRequestHeader(b[0],b[1]);a.send(c);return a};e.prototype.shouldIgnoreError=function(b){var d;d=this.options.ignoredExceptionClasses.concat(b._squash_ignored_exceptions||[]);return r(d,function(c){return b.name===c})?!0:
r(this.options.ignoredExceptionMessages,function(c,a){return b.name===c?r(a,function(a){return b.message.match(a)}):!1})};w=function(b){var d,c,a,g,y;d=[];g=0;for(y=b.length;g<y;g++)a=b[g],(c=a.context)&&r(c,function(a){return 200<a.length})&&(c=null),d.push({url:a.url,line:a.line,column:a.column,symbol:a.func,context:c,type:"minified"});return[{name:"Active Thread",faulted:!0,backtrace:d}]};n=function(b){var d;d=function(b){return 10>b?"0"+b:b};return""+b.getUTCFullYear()+"-"+d(b.getUTCMonth()+1)+
"-"+d(b.getUTCDate())+"T"+d(b.getUTCHours())+":"+d(b.getUTCMinutes())+":"+d(b.getUTCSeconds())+"Z"};r=function(b,d){var c,a,g;if(b instanceof Array){a=0;for(g=b.length;a<g;a++)if(c=b[a],d(c))return!0}else for(c in b)if(f.call(b,c)&&(a=b[c],d(c,a)))return!0;return!1};h=function(b,d){var c,a,g;g=[];for(c in d)f.call(d,c)&&(a=d[c],g.push(b[c]=a));return g};l=e}).call(this);var TraceKit={};
TraceKit.report=function(){function l(e,j){var f=null,h;for(h in i)if(i.hasOwnProperty(h))try{i[h](e,j)}catch(b){f=b}if(f)throw f;}function f(n){if(j){if(e===n)return;var i=j;e=j=null;l(i,n)}var f=TraceKit.computeStackTrace(n);j=f;e=n;window.setTimeout(function(){e===n&&(e=j=null,l(f,n))},f.incomplete?2E3:0);throw n;}var i=[],e=null,j=null,u=window.onerror;window.onerror=function(n,f,i){var h=null;j?(TraceKit.computeStackTrace.augmentStackTraceWithInitialElement(j,f,i,n),h=j,e=j=null):(h={url:f,line:i},
h.func=TraceKit.computeStackTrace.guessFunctionName(h.url,h.line),h.context=TraceKit.computeStackTrace.gatherContext(h.url,h.line),h={mode:"onerror",message:n,stack:[h]});l(h,null);return u?u.apply(this,arguments):!1};f.subscribe=function(e){i.push(e)};f.unsubscribe=function(e){for(var f=i.length-1;0<=f;--f)i[f]===e&&i.splice(f,1)};return f}();
TraceKit.computeStackTrace=function(){function l(a){if(!c.hasOwnProperty(a)){var g,b=a.split("/");if(2<b.length&&b[2]===document.domain)try{void 0===XMLHttpRequest&&(XMLHttpRequest=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(g){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(b){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(y){}throw Error("No XHR.");});var A=new XMLHttpRequest;A.open("GET",a,!1);
A.send("");g=A.responseText}catch(d){g=""}else g=[];c[a]=g.length?g.split("\n"):[]}return c[a]}function f(a,g){var b=/function ([^(]*)\(([^)]*)\)/,A=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,d="",c=l(a),e;if(!c.length)return"?";for(var f=0;10>f;++f)if(d=c[g-f]+d,void 0!==d&&((e=A.exec(d))||(e=b.exec(d))))return e[1];return"?"}function i(a,g){var b=l(a),d=[],c=!1;if(!b.length)return null;for(var g=g-1,e=g-2,f=g+2;e<f;++e)d.push(b[e]),void 0!==b[e]&&(c=!0);return c?d:null}function e(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,
"\\$&")}function j(a){return e(a).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function u(a,b){for(var d,c,e=0,f=b.length;e<f;++e)if((d=l(b[e])).length)if(d=d.join("\n"),c=a.exec(d))return{url:b[e],line:d.substring(0,c.index).split("\n").length,column:c.index-d.lastIndexOf("\n",c.index)-1};return null}function n(a,b,d){var b=l(b),a=RegExp("\\b"+e(a)+"\\b"),c,d=d-1;return b&&b.length>d&&(c=a.exec(b[d]))?c.index:null}
function r(a){var b=[window.location.href],d=document.getElementsByTagName("script"),a=""+a,c;for(c=0;c<d.length;++c){var f=d[c];f.src&&b.push(f.src)}(d=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(a))?(c=d[1]?"\\s+"+d[1]:"",f=d[2].split(",").join("\\s*,\\s*"),d=e(d[3]).replace(/;$/,";?").replace(/\s+/g,"\\s+"),c=RegExp("function"+c+"\\s*\\(\\s*"+f+"\\s*\\)\\s*{\\s*"+d+"\\s*}")):c=RegExp(e(a).replace(/\s+/g,"\\s+"));if(c=u(c,b))return c;if(d=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(a)){a=
d[1];d=j(d[2]);c=RegExp("on"+a+"=[\\'\"]\\s*"+d+"\\s*[\\'\"]","i");if(c=u(c,b[0]))return c;c=RegExp(d);if(c=u(c,b))return c}return null}function w(a,b,d,c){b={url:b,line:d};if(b.url&&b.line){a.incomplete=!1;b.func||(b.func=f(b.url,b.line));b.context||(b.context=i(b.url,b.line));if(c=/ '([^']+)' /.exec(c))b.column=n(c[1],b.url,b.line);if(0<a.stack.length&&a.stack[0].url===b.url){if(a.stack[0].line===b.line)return!1;if(!a.stack[0].line&&a.stack[0].func===b.func)return a.stack[0].line=b.line,a.stack[0].context=
b.context,!1}a.stack.unshift(b);return a.partial=!0}a.incomplete=!0;return!1}function h(a,d){for(var c=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,e=[],i={},j,k,h=arguments.callee.caller;h;h=h.caller)if(!(h===b||h===TraceKit.report)){k={url:null,func:"?",line:null,column:null};if(h.name)k.func=h.name;else if(j=c.exec(h.toString()))k.func=j[1];if(j=r(h)){k.url=j.url;k.line=j.line;"?"===k.func&&(k.func=f(k.url,k.line));var l=/ '([^']+)' /.exec(a.message||a.description);l&&(k.column=
n(l[1],j.url,j.line))}i[""+h]&&(k.recursion=!0);e.push(k)}d&&e.splice(0,d);c={mode:"callers",name:a.name,message:a.message,stack:e};w(c,a.sourceURL||a.fileName,a.line||a.lineNumber,a.message||a.description);return c}function b(a,b){var c=null,b=void 0===b?0:+b;try{for(var e=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,r=a.stacktrace.split("\n"),p=[],k,w=0,L=r.length;w<L;w+=2)if(k=e.exec(r[w])){var v={line:+k[1],column:+k[2],func:k[3]||k[4],args:k[5]?
k[5].split(","):[],url:k[6]};!v.func&&v.line&&(v.func=f(v.url,v.line));if(v.line)try{v.context=i(v.url,v.line)}catch(U){}v.context||(v.context=[r[w+1]]);p.push(v)}c=p.length?{mode:"stacktrace",name:a.name,message:a.message,stack:p}:null;if(c)return c}catch(M){if(d)throw M;}try{if(a.stack){var e=/^\s*at (\S+) \(((?:file|http):.*?):(\d+)(?::(\d+))?\)\s*$/i,r=/^\s*(\S*)(?:\((.*?)\))?@((?:file|http).*?):(\d+)(?::(\d+))?\s*$/i,D=a.stack.split("\n"),p=[],q,s,C=/^(.*) is undefined$/.exec(a.message);k=0;
for(var F=D.length;k<F;++k){if(q=r.exec(D[k]))s={url:q[3],func:q[1],args:q[2]?q[2].split(","):"",line:+q[4],column:q[5]?+q[5]:null};else if(q=e.exec(D[k]))s={url:q[2],func:q[1],line:+q[3],column:q[4]?+q[4]:null};else continue;!s.func&&s.line&&(s.func=f(s.url,s.line));s.line&&(s.context=i(s.url,s.line));p.push(s)}p[0]&&(p[0].line&&!p[0].column&&C)&&(p[0].column=n(C[1],p[0].url,p[0].line));c=p.length?{mode:"stack",name:a.name,message:a.message,stack:p}:null}else c=null;if(c)return c}catch(N){if(d)throw N;
}try{var z=a.message.split("\n");if(4>z.length)c=null;else{D=/^\s*Line (\d+) of linked script ((?:file|http)\S+)(?:: in function (\S+))?\s*$/i;q=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|http)\S+)(?:: in function (\S+))?\s*$/i;s=/^\s*Line (\d+) of function script\s*$/i;var C=[],m=document.getElementsByTagName("script"),F=[],x,t,H,B;for(t in m)m.hasOwnProperty(t)&&!m[t].src&&F.push(m[t]);t=2;for(H=z.length;t<H;t+=2){m=null;if(x=D.exec(z[t]))m={url:x[2],func:x[3],line:+x[1]};else if(x=q.exec(z[t])){var m=
{url:x[3],func:x[4]},O=+x[1],I=F[x[2]-1];if(I&&(B=l(m.url))){B=B.join("\n");var J=B.indexOf(I.innerText);0<=J&&(m.line=O+B.substring(0,J).split("\n").length)}}else if(x=s.exec(z[t])){var K=window.location.href.replace(/#.*$/,""),P=x[1],Q=RegExp(j(z[t+1]));B=u(Q,[K]);m={url:K,line:B?B.line:P,func:""}}if(m){m.func||(m.func=f(m.url,m.line));var E=i(m.url,m.line),R=E?E[Math.floor(E.length/2)]:null;m.context=E&&R.replace(/^\s*/,"")===z[t+1].replace(/^\s*/,"")?E:[z[t+1]];C.push(m)}}c=C.length?{mode:"multiline",
name:a.name,message:z[0],stack:C}:null}if(c)return c}catch(S){if(d)throw S;}try{if(c=h(a,b+1))return c}catch(T){if(d)throw T;}return{mode:"failed"}}var d=!1,c={};b.augmentStackTraceWithInitialElement=w;b.guessFunctionName=f;b.gatherContext=i;b.ofCaller=function(a){a=(void 0===a?0:+a)+1;try{0()}catch(c){return b(c,a+1)}return null};return b}();
(function(l){var f=Array.prototype.slice,i=l.setTimeout;l.setTimeout=function(){var e=f.call(arguments,0),l=e[0];e[0]=function(){try{l.apply(this,arguments)}catch(e){throw TraceKit.report(e),e;}};return i.apply(this,e)};var e=l.setInterval;l.setInterval=function(){var j=f.call(arguments,0),i=j[0];j[0]=function(){try{i.apply(this,arguments)}catch(e){throw TraceKit.report(e),e;}};return e.apply(this,j)}})(window);
