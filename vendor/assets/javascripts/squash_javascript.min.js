(function(){var m,l={}.hasOwnProperty,g=[].slice;("undefined"!==typeof exports&&null!==exports?exports:this).SquashJavascript=function(){function d(){}var e;e=void 0;d.instance=function(){return null!=e?e:e=new m};return d}();m=function(){function d(){TraceKit.report.subscribe(function(a,c){return SquashJavascript.instance().report(a,c)})}var e,k,q,w;d.prototype.configure=function(a){var c,f,b;this.options||(this.options={disabled:!1,notifyPath:"/api/1.0/notify",transmitTimeout:15E3,ignoredExceptionClasses:[],
ignoredExceptionMessages:{},globalUserData:{}});b=[];for(c in a)l.call(a,c)&&(f=a[c],b.push(this.options[c]=f));return b};d.prototype.notify=function(a,c){if(a instanceof Error)return a._squash_user_data=c,TraceKit.report(a);throw a;};d.prototype.report=function(a,c){var f,b,x,d,F,H,I,J,K,n,h,z,g,w,k;try{if(null!=(J=this.options)&&J.disabled)return!1;if(!(null!=(K=this.options)&&K.APIKey)||!(null!=(n=this.options)&&n.environment)||!(null!=(h=this.options)&&h.revision)||!(null!=(z=this.options)&&z.APIHost))return console.error("Missing required Squash configuration keys"),
!1;if(this.shouldIgnoreError(a)||!a.stack)return!1;b={};b.api_key=this.options.APIKey;b.environment=this.options.environment;b.client="javascript";b.revision=this.options.revision;g=this.options.globalUserData;for(d in g)l.call(g,d)&&(I=g[d],b[d]=I);b.class_name=null!=(w=a.type)?w:a.name;!a.name&&(F=a.message.match(/^(Uncaught )?(\w+): (.+)/))?(b.class_name=F[2],b.message=F[3]):b.message=a.message;null==b.class_name&&(b.class_name="Error");b.backtraces=q(a.stack);b.capture_method=a.mode;b.occurred_at=
e(new Date);b.schema=window.location.protocol.replace(/:$/,"");b.host=window.location.hostname;0<window.location.port.length&&(b.port=window.location.port);b.path=window.location.pathname;b.query=window.location.search;""!==window.location.hash&&(b.fragment=window.location.hash);b.user_agent=navigator.userAgent;b.screen_width=screen.width;b.screen_height=screen.height;b.window_width=window.innerWidth;b.window_height=window.innerHeight;b.color_depth=screen.colorDepth;if(c)for(x in k=c._squash_user_data,
k)l.call(k,x)&&(H=k[x],b[x]=H);f=JSON.stringify(b);this.HTTPTransmit(this.options.APIHost+this.options.notifyPath,[["Content-Type","application/json"]],f);return!0}catch(m){return console.error("Error while trying to notify Squash:",m.stack),console.error("-- original error:",a)}};d.prototype.addUserData=function(a,c){try{return c()}catch(f){throw null==f._squash_user_data&&(f._squash_user_data={}),w(f._squash_user_data,a),f;}};d.prototype.addingUserData=function(a,c){return function(){var f;f=1<=
arguments.length?g.call(arguments,0):[];return SquashJavascript.instance().addUserData(a,function(){return c.apply(null,f)})}};d.prototype.ignoreExceptions=function(){var a,c;c=2<=arguments.length?g.call(arguments,0,a=arguments.length-1):(a=0,[]);a=arguments[a++];try{return a()}catch(f){throw a=f,a._squash_ignored_exceptions=(a._squash_ignored_exceptions||[]).concat(c),a;}};d.prototype.ignoringExceptions=function(){var a,c,f;c=2<=arguments.length?g.call(arguments,0,f=arguments.length-1):(f=0,[]);
a=arguments[f++];return function(){var b,f;b=1<=arguments.length?g.call(arguments,0):[];return(f=SquashJavascript.instance()).ignoreExceptions.apply(f,g.call(c).concat([function(){return a.apply(null,b)}]))}};d.prototype.HTTPTransmit=function(a,c,f){var b,d,e;b=new XMLHttpRequest;b.open("POST",a,!0);b.timeout=this.options.transmitTimeout;d=0;for(e=c.length;d<e;d++)a=c[d],b.setRequestHeader(a[0],a[1]);b.send(f);return b};d.prototype.shouldIgnoreError=function(a){var c;c=this.options.ignoredExceptionClasses.concat(a._squash_ignored_exceptions||
[]);return k(c,function(c){return a.name===c})?!0:k(this.options.ignoredExceptionMessages,function(c,b){return a.name===c?k(b,function(b){return a.message.match(b)}):!1})};q=function(a){var c,f,b,d,e;c=[];d=0;for(e=a.length;d<e;d++)b=a[d],(f=b.context)&&k(f,function(a){return a&&200<a.length})&&(f=null),c.push({url:b.url,line:b.line,column:b.column,symbol:b.func,context:f,type:"minified"});return[{name:"Active Thread",faulted:!0,backtrace:c}]};e=function(a){var c;c=function(a){return 10>a?"0"+a:a};
return""+a.getUTCFullYear()+"-"+c(a.getUTCMonth()+1)+"-"+c(a.getUTCDate())+"T"+c(a.getUTCHours())+":"+c(a.getUTCMinutes())+":"+c(a.getUTCSeconds())+"Z"};k=function(a,c){var f,b,d;if(a instanceof Array){b=0;for(d=a.length;b<d;b++)if(f=a[b],c(f))return!0}else for(f in a)if(l.call(a,f)&&(b=a[f],c(f,b)))return!0;return!1};w=function(a,c){var d,b,e;e=[];for(d in c)l.call(c,d)&&(b=c[d],e.push(a[d]=b));return e};return d}()}).call(this);var TraceKit={};
TraceKit.report=function(){function m(d,e){var a=null,c;for(c in g)if(g.hasOwnProperty(c))try{g[c](d,e)}catch(f){a=f}if(a)throw a;}function l(q){if(e){if(d===q)return;var g=e;d=e=null;m(g,q)}var a=TraceKit.computeStackTrace(q);e=a;d=q;window.setTimeout(function(){d===q&&(d=e=null,m(a,q))},a.incomplete?2E3:0);throw q;}var g=[],d=null,e=null,k=window.onerror;window.onerror=function(g,l,a){var c=null;e?(TraceKit.computeStackTrace.augmentStackTraceWithInitialElement(e,l,a,g),c=e,d=e=null):(c={url:l,line:a},
c.func=TraceKit.computeStackTrace.guessFunctionName(c.url,c.line),c.context=TraceKit.computeStackTrace.gatherContext(c.url,c.line),c={mode:"onerror",message:g,stack:[c]});m(c,null);return k?k.apply(this,arguments):!1};l.subscribe=function(d){g.push(d)};l.unsubscribe=function(d){for(var e=g.length-1;0<=e;--e)g[e]===d&&g.splice(e,1)};return l}();
TraceKit.computeStackTrace=function(){function m(a){try{void 0===XMLHttpRequest&&(XMLHttpRequest=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(b){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(F){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(c){}throw Error("No XHR.");});var b=new XMLHttpRequest;b.open("GET",a,!1);b.send("");return b.responseText}catch(c){return""}}function l(a){if(!C.hasOwnProperty(a)){var b;
b=a.split("/");b=2<b.length&&b[2]===document.domain?m(a):[];C[a]=b.length?b.split("\n"):[]}return C[a]}function g(a,b){var c=/function ([^(]*)\(([^)]*)\)/,d=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,e="",f=l(a),h;if(!f.length)return"?";for(var g=0;10>g;++g)if(e=f[b-g]+e,void 0!==e&&((h=d.exec(e))||(h=c.exec(e))))return h[1];return"?"}function d(a,b){var c=l(a),d=[],e=!1;if(!c.length)return null;b-=1;for(var f=b-2,g=b+2;f<g;++f)d.push(c[f]),void 0!==c[f]&&(e=!0);return e?d:
null}function e(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function k(a){return e(a).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function q(a,b){for(var c,d,e=0,f=b.length;e<f;++e)if((c=l(b[e])).length)if(c=c.join("\n"),d=a.exec(c))return{url:b[e],line:c.substring(0,d.index).split("\n").length,column:d.index-c.lastIndexOf("\n",d.index)-1};return null}function w(a,b,c){b=l(b);a=RegExp("\\b"+e(a)+"\\b");
var d;c-=1;return b&&b.length>c&&(d=a.exec(b[c]))?d.index:null}function a(a){var b=[window.location.href],c=document.getElementsByTagName("script");a=""+a;var d;for(d=0;d<c.length;++d){var f=c[d];f.src&&b.push(f.src)}(c=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(a))?(d=c[1]?"\\s+"+c[1]:"",f=c[2].split(",").join("\\s*,\\s*"),c=e(c[3]).replace(/;$/,";?").replace(/\s+/g,"\\s+"),d=RegExp("function"+d+"\\s*\\(\\s*"+f+"\\s*\\)\\s*{\\s*"+c+"\\s*}")):d=RegExp(e(a).replace(/\s+/g,
"\\s+"));if(d=q(d,b))return d;if(c=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(a)){a=c[1];c=k(c[2]);d=RegExp("on"+a+"=[\\'\"]\\s*"+c+"\\s*[\\'\"]","i");if(d=q(d,b[0]))return d;d=RegExp(c);if(d=q(d,b))return d}return null}function c(a,b,c,e){b={url:b,line:c};if(b.url&&b.line){a.incomplete=!1;b.func||(b.func=g(b.url,b.line));b.context||(b.context=d(b.url,b.line));if(e=/ '([^']+)' /.exec(e))b.column=w(e[1],b.url,b.line);if(0<a.stack.length&&a.stack[0].url===b.url){if(a.stack[0].line===
b.line)return!1;if(!a.stack[0].line&&a.stack[0].func===b.func)return a.stack[0].line=b.line,a.stack[0].context=b.context,!1}a.stack.unshift(b);return a.partial=!0}a.incomplete=!0;return!1}function f(d,e){for(var f=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,l=[],q={},n,h,k=arguments.callee.caller;k;k=k.caller)if(!(k===b||k===TraceKit.report)){h={url:null,func:"?",line:null,column:null};if(k.name)h.func=k.name;else if(n=f.exec(k.toString()))h.func=n[1];if(n=a(k)){h.url=n.url;
h.line=n.line;"?"===h.func&&(h.func=g(h.url,h.line));var m=/ '([^']+)' /.exec(d.message||d.description);m&&(h.column=w(m[1],n.url,n.line))}q[""+k]&&(h.recursion=!0);l.push(h)}e&&l.splice(0,e);f={mode:"callers",name:d.name,message:d.message,stack:l};c(f,d.sourceURL||d.fileName,d.line||d.lineNumber,d.message||d.description);return f}function b(a,b){var c=null;b=void 0===b?0:+b;try{for(var e=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,m=a.stacktrace.split("\n"),
n=[],h,z=0,C=m.length;z<C;z+=2)if(h=e.exec(m[z])){var u={line:+h[1],column:+h[2],func:h[3]||h[4],args:h[5]?h[5].split(","):[],url:h[6]};!u.func&&u.line&&(u.func=g(u.url,u.line));if(u.line)try{u.context=d(u.url,u.line)}catch(X){}u.context||(u.context=[m[z+1]]);n.push(u)}c=n.length?{mode:"stacktrace",name:a.name,message:a.message,stack:n}:null;if(c)return c}catch(P){if(x)throw P;}try{if(a.stack){var e=/^\s*at (\S+) \(((?:file|http):.*?):(\d+)(?::(\d+))?\)\s*$/i,m=/^\s*(\S*)(?:\((.*?)\))?@((?:file|http).*?):(\d+)(?::(\d+))?\s*$/i,
D=a.stack.split("\n"),n=[],r,s,B=/^(.*) is undefined$/.exec(a.message);h=0;for(var G=D.length;h<G;++h){if(r=m.exec(D[h]))s={url:r[3],func:r[1],args:r[2]?r[2].split(","):"",line:+r[4],column:r[5]?+r[5]:null};else if(r=e.exec(D[h]))s={url:r[2],func:r[1],line:+r[3],column:r[4]?+r[4]:null};else continue;!s.func&&s.line&&(s.func=g(s.url,s.line));s.line&&(s.context=d(s.url,s.line));n.push(s)}n[0]&&(n[0].line&&!n[0].column&&B)&&(n[0].column=w(B[1],n[0].url,n[0].line));c=n.length?{mode:"stack",name:a.name,
message:a.message,stack:n}:null}else c=null;if(c)return c}catch(Q){if(x)throw Q;}try{var y=a.message.split("\n");if(4>y.length)c=null;else{D=/^\s*Line (\d+) of linked script ((?:file|http)\S+)(?:: in function (\S+))?\s*$/i;r=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|http)\S+)(?:: in function (\S+))?\s*$/i;s=/^\s*Line (\d+) of function script\s*$/i;var B=[],p=document.getElementsByTagName("script"),G=[],v,t,L,A;for(t in p)p.hasOwnProperty(t)&&!p[t].src&&G.push(p[t]);t=2;for(L=y.length;t<L;t+=
2){p=null;if(v=D.exec(y[t]))p={url:v[2],func:v[3],line:+v[1]};else if(v=r.exec(y[t])){var p={url:v[3],func:v[4]},R=+v[1],M=G[v[2]-1];if(M&&(A=l(p.url))){A=A.join("\n");var N=A.indexOf(M.innerText);0<=N&&(p.line=R+A.substring(0,N).split("\n").length)}}else if(v=s.exec(y[t])){var O=window.location.href.replace(/#.*$/,""),S=v[1],T=RegExp(k(y[t+1]));A=q(T,[O]);p={url:O,line:A?A.line:S,func:""}}if(p){p.func||(p.func=g(p.url,p.line));var E=d(p.url,p.line),U=E?E[Math.floor(E.length/2)]:null;E&&U.replace(/^\s*/,
"")===y[t+1].replace(/^\s*/,"")?p.context=E:p.context=[y[t+1]];B.push(p)}}c=B.length?{mode:"multiline",name:a.name,message:y[0],stack:B}:null}if(c)return c}catch(V){if(x)throw V;}try{if(c=f(a,b+1))return c}catch(W){if(x)throw W;}return{mode:"failed"}}var x=!1,C={};b.augmentStackTraceWithInitialElement=c;b.guessFunctionName=g;b.gatherContext=d;b.ofCaller=function(a){a=(void 0===a?0:+a)+1;try{0()}catch(c){return b(c,a+1)}return null};return b}();
(function(m){var l=Array.prototype.slice,g=m.setTimeout;m.setTimeout=function(){var d=l.call(arguments,0),k=d[0];d[0]=function(){try{k.apply(this,arguments)}catch(d){throw TraceKit.report(d),d;}};return g.apply(this,d)};var d=m.setInterval;m.setInterval=function(){var e=l.call(arguments,0),g=e[0];e[0]=function(){try{g.apply(this,arguments)}catch(d){throw TraceKit.report(d),d;}};return d.apply(this,e)}})(window);
