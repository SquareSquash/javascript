(function(){var h,k={}.hasOwnProperty,f=[].slice,e="undefined"!==typeof exports&&null!==exports?exports:this,j=function(){},v;v=void 0;j.instance=function(){return null!=v?v:v=new h};e.SquashJavascript=j;var e=function(){TraceKit.report.subscribe(function(b){return SquashJavascript.instance().report(b)})},r,u,C,l;e.prototype.configure=function(b){var d,c,a;this.options||(this.options={disabled:!1,notifyPath:"/api/1.0/notify",transmitTimeout:15E3,ignoredExceptionClasses:[],ignoredExceptionMessages:{}});
a=[];for(d in b)k.call(b,d)&&(c=b[d],a.push(this.options[d]=c));return a};e.prototype.notify=function(b){if(b instanceof Error)return TraceKit.report(b);throw b;};e.prototype.report=function(b,d){var c,a,g,n,z,A,p,i;try{if(null!=(n=this.options)&&n.disabled)return!1;if(!(null!=(z=this.options)&&z.APIKey)||!(null!=(A=this.options)&&A.environment)||!(null!=(p=this.options)&&p.revision)||!(null!=(i=this.options)&&i.APIHost))return console.error("Missing required Squash configuration keys"),!1;if(this.shouldIgnoreError(b)||
!b.stack)return!1;a=d||{};a.api_key=this.options.APIKey;a.environment=this.options.environment;a.client="javascript";a.revision=this.options.revision;a.class_name=b.type||b.name;!b.name&&(g=b.message.match(/^(Uncaught )?(\w+): (.+)/))?(a.class_name=g[2],a.message=g[3]):a.message=b.message;null==a.class_name&&(a.class_name="Error");a.backtraces=C(b.stack);a.capture_method=b.mode;a.occurred_at=r(new Date);a.schema=window.location.protocol.replace(/:$/,"");a.host=window.location.hostname;0<window.location.port.length&&
(a.port=window.location.port);a.path=window.location.pathname;a.query=window.location.search;""!==window.location.hash&&(a.fragment=window.location.hash);a.user_agent=navigator.userAgent;a.screen_width=screen.width;a.screen_height=screen.height;a.window_width=window.innerWidth;a.window_height=window.innerHeight;a.color_depth=screen.colorDepth;c=JSON.stringify(a);this.HTTPTransmit(this.options.APIHost+this.options.notifyPath,[["Content-Type","application/json"]],c);return!0}catch(e){return console.error("Error while trying to notify Squash:",
e.stack),console.error("-- original error:",b)}};e.prototype.addUserData=function(b,d){try{return d()}catch(c){throw null==c._squash_user_data&&(c._squash_user_data={}),l(c._squash_user_data,b),c;}};e.prototype.addingUserData=function(b,d){return function(){var c;c=1<=arguments.length?f.call(arguments,0):[];return SquashJavascript.instance().addUserData(b,function(){return d.apply(null,c)})}};e.prototype.ignoreExceptions=function(){var b,d;d=2<=arguments.length?f.call(arguments,0,b=arguments.length-
1):(b=0,[]);b=arguments[b++];try{return b()}catch(c){throw c._squash_ignored_exceptions=(c._squash_ignored_exceptions||[]).concat(d),c;}};e.prototype.ignoringExceptions=function(){var b,d,c;d=2<=arguments.length?f.call(arguments,0,c=arguments.length-1):(c=0,[]);b=arguments[c++];return function(){var a,g;a=1<=arguments.length?f.call(arguments,0):[];return(g=SquashJavascript.instance()).ignoreExceptions.apply(g,f.call(d).concat([function(){return b.apply(null,a)}]))}};e.prototype.HTTPTransmit=function(b,
d,c){var a,g,n;a=new XMLHttpRequest;a.timeout=this.options.transmitTimeout;a.open("POST",b,!0);g=0;for(n=d.length;g<n;g++)b=d[g],a.setRequestHeader(b[0],b[1]);a.send(c);return a};e.prototype.shouldIgnoreError=function(b){var d;d=this.options.ignoredExceptionClasses.concat(b._squash_ignored_exceptions||[]);return u(d,function(c){return b.name===c})?!0:u(this.options.ignoredExceptionMessages,function(c,a){return b.name===c?u(a,function(a){return b.message.match(a)}):!1})};C=function(b){var d,c,a,g,
n;d=[];g=0;for(n=b.length;g<n;g++)a=b[g],(c=a.context)&&u(c,function(a){return 200<a.length})&&(c=null),d.push({url:a.url,line:a.line,column:a.column,symbol:a.func,context:c,type:"minified"});return[{name:"Active Thread",faulted:!0,backtrace:d}]};r=function(b){var d;d=function(b){return 10>b?"0"+b:b};return""+b.getUTCFullYear()+"-"+d(b.getUTCMonth()+1)+"-"+d(b.getUTCDate())+"T"+d(b.getUTCHours())+":"+d(b.getUTCMinutes())+":"+d(b.getUTCSeconds())+"Z"};u=function(b,d){var c,a,g;if(b instanceof Array){a=
0;for(g=b.length;a<g;a++)if(c=b[a],d(c))return!0}else for(c in b)if(k.call(b,c)&&(a=b[c],d(c,a)))return!0;return!1};l=function(b,d){var c,a,g;g=[];for(c in d)k.call(d,c)&&(a=d[c],g.push(b[c]=a));return g};h=e}).call(this);var TraceKit={};
TraceKit.report=function(){function h(e){var j=null,h;for(h in f)if(f.hasOwnProperty(h))try{f[h](e)}catch(l){j=l}if(j)throw j;}function k(r){if(j){if(e===r)return;var f=j;e=j=null;h(f)}var k=TraceKit.computeStackTrace(r);j=k;e=r;window.setTimeout(function(){e===r&&(e=j=null,h(k))},k.incomplete?2E3:0);throw r;}var f=[],e=null,j=null,v=window.onerror;window.onerror=function(r,f,k){var l=null;j?(TraceKit.computeStackTrace.augmentStackTraceWithInitialElement(j,f,k,r),l=j,e=j=null):(l={url:f,line:k},l.func=
TraceKit.computeStackTrace.guessFunctionName(l.url,l.line),l.context=TraceKit.computeStackTrace.gatherContext(l.url,l.line),l={mode:"onerror",message:r,stack:[l]});h(l);return v?v.apply(this,arguments):!1};k.subscribe=function(e){f.push(e)};k.unsubscribe=function(e){for(var j=f.length-1;0<=j;--j)f[j]===e&&f.splice(j,1)};return k}();
TraceKit.computeStackTrace=function(){function h(a){if(!c.hasOwnProperty(a)){var g,b=a.split("/");if(2<b.length&&b[2]===document.domain)try{void 0===XMLHttpRequest&&(XMLHttpRequest=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(g){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(b){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(n){}throw Error("No XHR.");});var z=new XMLHttpRequest;z.open("GET",a,!1);
z.send("");g=z.responseText}catch(d){g=""}else g=[];c[a]=g.length?g.split("\n"):[]}return c[a]}function k(a,g){var b=/function ([^(]*)\(([^)]*)\)/,z=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,c="",d=h(a),i;if(!d.length)return"?";for(var e=0;10>e;++e)if(c=d[g-e]+c,void 0!==c&&((i=z.exec(c))||(i=b.exec(c))))return i[1];return"?"}function f(a,g){var b=h(a),c=[],d=!1;if(!b.length)return null;for(var g=g-1,e=g-2,i=g+2;e<i;++e)c.push(b[e]),void 0!==b[e]&&(d=!0);return d?c:null}function e(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,
"\\$&")}function j(a){return e(a).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function v(a,b){for(var n,c,d=0,e=b.length;d<e;++d)if((n=h(b[d])).length)if(n=n.join("\n"),c=a.exec(n))return{url:b[d],line:n.substring(0,c.index).split("\n").length,column:c.index-n.lastIndexOf("\n",c.index)-1};return null}function r(a,b,c){var b=h(b),a=RegExp("\\b"+e(a)+"\\b"),d,c=c-1;return b&&b.length>c&&(d=a.exec(b[c]))?d.index:null}
function u(a){var b=[window.location.href],c=document.getElementsByTagName("script"),a=""+a,d;for(d=0;d<c.length;++d){var f=c[d];f.src&&b.push(f.src)}(c=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(a))?(d=c[1]?"\\s+"+c[1]:"",f=c[2].split(",").join("\\s*,\\s*"),c=e(c[3]).replace(/;$/,";?").replace(/\s+/g,"\\s+"),d=RegExp("function"+d+"\\s*\\(\\s*"+f+"\\s*\\)\\s*{\\s*"+c+"\\s*}")):d=RegExp(e(a).replace(/\s+/g,"\\s+"));if(d=v(d,b))return d;if(c=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(a)){a=
c[1];c=j(c[2]);d=RegExp("on"+a+"=[\\'\"]\\s*"+c+"\\s*[\\'\"]","i");if(d=v(d,b[0]))return d;d=RegExp(c);if(d=v(d,b))return d}return null}function C(a,b,c,d){b={url:b,line:c};if(b.url&&b.line){a.incomplete=!1;b.func||(b.func=k(b.url,b.line));b.context||(b.context=f(b.url,b.line));if(d=/ '([^']+)' /.exec(d))b.column=r(d[1],b.url,b.line);if(0<a.stack.length&&a.stack[0].url===b.url){if(a.stack[0].line===b.line)return!1;if(!a.stack[0].line&&a.stack[0].func===b.func)return a.stack[0].line=b.line,a.stack[0].context=
b.context,!1}a.stack.unshift(b);return a.partial=!0}a.incomplete=!0;return!1}function l(a,c){for(var d=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,e=[],j={},f,i,h=arguments.callee.caller;h;h=h.caller)if(!(h===b||h===TraceKit.report)){i={url:null,func:"?",line:null,column:null};if(h.name)i.func=h.name;else if(f=d.exec(h.toString()))i.func=f[1];if(f=u(h)){i.url=f.url;i.line=f.line;"?"===i.func&&(i.func=k(i.url,i.line));var l=/ '([^']+)' /.exec(a.message||a.description);l&&(i.column=
r(l[1],f.url,f.line))}j[""+h]&&(i.recursion=!0);e.push(i)}c&&e.splice(0,c);d={mode:"callers",name:a.name,message:a.message,stack:e};C(d,a.sourceURL||a.fileName,a.line||a.lineNumber,a.message||a.description);return d}function b(a,b){var c=null,b=void 0===b?0:+b;try{for(var e=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,A=a.stacktrace.split("\n"),p=[],i,u=0,C=A.length;u<C;u+=2)if(i=e.exec(A[u])){var w={line:+i[1],column:+i[2],func:i[3]||i[4],args:i[5]?
i[5].split(","):[],url:i[6]};!w.func&&w.line&&(w.func=k(w.url,w.line));if(w.line)try{w.context=f(w.url,w.line)}catch(T){}w.context||(w.context=[A[u+1]]);p.push(w)}c=p.length?{mode:"stacktrace",name:a.name,message:a.message,stack:p}:null;if(c)return c}catch(L){if(d)throw L;}try{if(a.stack){var e=/^\s*at (\S+) \(((?:file|http):.*?):(\d+)(?::(\d+))?\)\s*$/i,A=/^\s*(\S*)(?:\((.*?)\))?@((?:file|http).*?):(\d+)(?::(\d+))?\s*$/i,E=a.stack.split("\n"),p=[],q,s,D=/^(.*) is undefined$/.exec(a.message);i=0;
for(var G=E.length;i<G;++i){if(q=A.exec(E[i]))s={url:q[3],func:q[1],args:q[2]?q[2].split(","):"",line:+q[4],column:q[5]?+q[5]:null};else if(q=e.exec(E[i]))s={url:q[2],func:q[1],line:+q[3],column:q[4]?+q[4]:null};else continue;!s.func&&s.line&&(s.func=k(s.url,s.line));s.line&&(s.context=f(s.url,s.line));p.push(s)}p[0]&&(p[0].line&&!p[0].column&&D)&&(p[0].column=r(D[1],p[0].url,p[0].line));c=p.length?{mode:"stack",name:a.name,message:a.message,stack:p}:null}else c=null;if(c)return c}catch(M){if(d)throw M;
}try{var y=a.message.split("\n");if(4>y.length)c=null;else{E=/^\s*Line (\d+) of linked script ((?:file|http)\S+)(?:: in function (\S+))?\s*$/i;q=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|http)\S+)(?:: in function (\S+))?\s*$/i;s=/^\s*Line (\d+) of function script\s*$/i;var D=[],m=document.getElementsByTagName("script"),G=[],x,t,H,B;for(t in m)m.hasOwnProperty(t)&&!m[t].src&&G.push(m[t]);t=2;for(H=y.length;t<H;t+=2){m=null;if(x=E.exec(y[t]))m={url:x[2],func:x[3],line:+x[1]};else if(x=q.exec(y[t])){var m=
{url:x[3],func:x[4]},N=+x[1],I=G[x[2]-1];if(I&&(B=h(m.url))){B=B.join("\n");var J=B.indexOf(I.innerText);0<=J&&(m.line=N+B.substring(0,J).split("\n").length)}}else if(x=s.exec(y[t])){var K=window.location.href.replace(/#.*$/,""),O=x[1],P=RegExp(j(y[t+1]));B=v(P,[K]);m={url:K,line:B?B.line:O,func:""}}if(m){m.func||(m.func=k(m.url,m.line));var F=f(m.url,m.line),Q=F?F[Math.floor(F.length/2)]:null;m.context=F&&Q.replace(/^\s*/,"")===y[t+1].replace(/^\s*/,"")?F:[y[t+1]];D.push(m)}}c=D.length?{mode:"multiline",
name:a.name,message:y[0],stack:D}:null}if(c)return c}catch(R){if(d)throw R;}try{if(c=l(a,b+1))return c}catch(S){if(d)throw S;}return{mode:"failed"}}var d=!1,c={};b.augmentStackTraceWithInitialElement=C;b.guessFunctionName=k;b.gatherContext=f;b.ofCaller=function(a){a=(void 0===a?0:+a)+1;try{0()}catch(c){return b(c,a+1)}return null};return b}();
(function(h){var k=Array.prototype.slice,f=h.setTimeout;h.setTimeout=function(){var e=k.call(arguments,0),h=e[0];e[0]=function(){try{h.apply(this,arguments)}catch(e){throw TraceKit.report(e),e;}};return f.apply(this,e)};var e=h.setInterval;h.setInterval=function(){var f=k.call(arguments,0),h=f[0];f[0]=function(){try{h.apply(this,arguments)}catch(e){throw TraceKit.report(e),e;}};return e.apply(this,f)}})(window);
